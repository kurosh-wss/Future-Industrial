version: '3.8'

services:
  # React Frontend (public via Traefik)
  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
      args:
        # Optional: add your Vite/React env build arguments
        VITE_API_URL: "${VITE_API_URL:-}"
    container_name: future-industrial_frontend
    networks:
      - internal
      - traefik
    labels:
      - "traefik.enable=true"
      - "traefik.docker.network=traefik_default"
      
      # Adjust subdomain here:
      - "traefik.http.routers.future-industrial.rule=Host(`future-industrial.neovaco.com`)"
      
      - "traefik.http.routers.future-industrial.entrypoints=websecure"
      - "traefik.http.routers.future-industrial.tls.certresolver=myresolver"
      - "traefik.http.services.future-industrial.loadbalancer.server.port=80"
    restart: unless-stopped
    healthcheck:
      disable: true   # Not needed for static Nginx

volumes:
  media_volume:

networks:
  internal:
    name: future-industrial_internal
  traefik:
    external: true
    name: traefik_default
